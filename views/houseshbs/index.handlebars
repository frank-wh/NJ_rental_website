<section>
    <input type="hidden" id="allHouses" value='{{toJson houses}}'>
    <div id="houseIndexMapDiv">
        <div id="houseIndexMap"></div>
    </div>

    <div id="searchDiv">
        <form action="/houses/sort" id="sortForm" method="POST">
            <label for="sort">Sort: </label>
            <select id="sort" name="sort">
                <option value="">All</option>
                <option value="priceUp">Payment (low to high)</option>
                <option value="priceDown">Payment (high to low)</option>
                <option value="newest">Newest</option>
            </select>
            <button id="sortSubmit" class="btn btn-sm btn-primary" type="submit">GO!</button>
        </form>

        <form action="/houses/search" id="searchForm" method="POST">
            <label for="search">Type: </label>
            <select id="search" name="search">
                <option value="">All</option>
                <option value="Private Room">Private Room</option>
                <option value="Entire home/apt">Entire home/apt</option>
                <option value="Shared Room">Shared Room</option>
                <option value="Hotel Room">Hotel Room</option>
            </select>

            <label for="low">Price From: </label>
            <select name="low" id="low">
                <option value="1">$0</option>
                <option value="500">$500</option>
                <option value="1000">$1000</option>
                <option value="1500">$1500</option>
                <option value="2000">$2000</option>
                <option value="2500">$2500</option>
            </select>

            <label for="high">To: </label>
            <select name="high" id="high">
                <option value="5000">$5000+</option>
                <option value="2500">$2500</option>
                <option value="3000">$3000</option>
                <option value="3500">$3500</option>
                <option value="4000">$4000</option>
                <option value="4500">$4500</option>
            </select>

            <button id="searchSubmit" class="btn btn-sm btn-primary" type="submit">Search</button>
        </form>
    </div>

    <div id="housesDiv">
        {{#if isEmpty}}
        <div id="houselistempty">{{error}}</div>
        {{else}}
        {{#each houses}}
        <div class="card houseindexcard">
            <div class="row">
                {{#if images}}
                <div id="carouselControls{{@index}}" class="col carousel slide" data-interval="false">
                    <div class="carousel-inner">
                    {{#each images}}
                        {{#if @first}}
                        <div class="carousel-item active">
                            <img src="/houses/image/{{this}}" alt="">
                        </div>
                        {{else}}
                        <div class="carousel-item">
                            <img src="/houses/image/{{this}}" alt="">
                        </div>
                        {{/if}}
                    {{/each}}
                    </div>
                    <a class="carousel-control-prev" href="#carouselControls{{@index}}" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselControls{{@index}}" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
                {{/if}}

                <div class="col">
                    <div id="houseindextext" class="card-block">
                        <a class="card-title" href="/houses/{{_id}}">{{address}}</a>
                        <p class="card-text">{{statement}}</p>
                        <p class="card-text"><strong>Room Type:</strong> {{roomType}}</p>
                        <p class="card-text"><strong>Posted Date:</strong> {{postedDate}}</p>
                        <p class="card-text"><strong>Price:</strong> ${{price}}/month</p>
                    </div>
                </div>
            </div>
        </div>
        {{/each}}
        {{/if}}
    </div>
</section>